package com.kisman.cc.module.exploit;

import com.kisman.cc.gui.book.BookEditingGui;
import com.kisman.cc.mixin.mixins.accessor.AccessorGuiScreenBook;
import com.kisman.cc.module.Category;
import com.kisman.cc.module.Module;
import net.minecraft.client.gui.GuiScreenBook;
import net.minecraft.item.ItemStack;
import net.minecraftforge.client.event.GuiOpenEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;

public class BookFormatModule extends Module {
    public BookFormatModule() {
        super("BookFormatModule", Category.EXPLOIT);
    }

    @SubscribeEvent
    public void onGuiOpen(GuiOpenEvent event) {
        if(event.getGui() instanceof GuiScreenBook) {
            GuiScreenBook gui = (GuiScreenBook) event.getGui();

            if(gui instanceof BookEditingGui) return;

            if(((AccessorGuiScreenBook) gui).bookIsUnsigned()) {
                ItemStack book = ((AccessorGuiScreenBook) gui).getBook();
                event.setGui(new BookEditingGui(mc.player, book));
            }
        }
    }
}
