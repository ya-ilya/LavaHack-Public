package com.kisman.cc.module.exploit;

import com.kisman.cc.event.events.PlayerUpdateEvent;
import com.kisman.cc.module.Category;
import com.kisman.cc.module.Module;
import com.kisman.cc.setting.Setting;
import com.kisman.cc.util.TimerUtil;
import me.zero.alpine.listener.Listener;

public class Timer extends Module {
    private final Setting speed = new Setting("Ticks", this, 4, 0.1, 10, false);

    public Timer() {
        super("Timer", Category.EXPLOIT);

        register(speed);
    }

    public void onDisable() {
        TimerUtil.setTickLength(50f);
    }

    @SuppressWarnings("unused")
    private final Listener<PlayerUpdateEvent> playerUpdateListener = listener(event -> TimerUtil.setTickLength(50 / getSpeed()));

    private float getSpeed() {return Math.max((float) speed.getValDouble(), 0.1f);}
}
